<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>HÃ¶rÃ¼bung: Instrumental-SÃ¤tze</title>
    <script src="https://cdn.jsdelivr.net/npm/drag-drop-touch@1.3.1/DragDropTouch.js"></script>
    <style>
        :root {
            --primary-color: #2c3e50;
            --secondary-color: #3498db;
            --success-color: #27ae60;
            --error-color: #e74c3c;
            --bg-color: #f0f2f5;
            --card-bg: #ffffff;
            --border-color: #dcdde1;
        }

        /* Verbot von Kursivschrift im gesamten Dokument */
        * {
            font-style: normal !important;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Helvetica, Arial, sans-serif;
            background-color: var(--bg-color);
            color: var(--primary-color);
            line-height: 1.6;
            margin: 0;
            padding: 15px;
        }

        .container {
            max-width: 850px;
            margin: 0 auto;
            background: var(--card-bg);
            padding: 30px;
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
        }

        h1, h2 {
            text-align: center;
            color: var(--primary-color);
            margin-top: 0;
        }

        .intro-section {
            background: #eef2f7;
            padding: 20px;
            border-left: 8px solid var(--secondary-color);
            border-radius: 10px;
            margin-bottom: 30px;
        }

        .exercise-card {
            border: 1px solid var(--border-color);
            padding: 25px;
            margin-bottom: 35px;
            border-radius: 12px;
            background: #fff;
            box-shadow: 0 4px 6px rgba(0,0,0,0.05);
        }

        .audio-box {
            display: flex;
            justify-content: center;
            margin-bottom: 20px;
        }

        .play-btn {
            background-color: var(--secondary-color);
            color: white;
            border: none;
            padding: 15px 30px;
            border-radius: 10px;
            cursor: pointer;
            font-size: 1.2rem;
            font-weight: bold;
            display: flex;
            align-items: center;
            gap: 12px;
            transition: transform 0.1s, background-color 0.2s;
        }

        .play-btn:hover { background-color: #2980b9; }
        .play-btn:active { transform: scale(0.97); }

        .options-grid {
            display: grid;
            grid-template-columns: 1fr;
            gap: 12px;
            margin-bottom: 20px;
        }

        @media (min-width: 600px) {
            .options-grid { grid-template-columns: repeat(3, 1fr); }
        }

        .opt-btn {
            padding: 12px;
            background-color: #f8f9fa;
            border: 2px solid var(--border-color);
            color: var(--primary-color);
            border-radius: 8px;
            cursor: pointer;
            font-weight: bold;
            text-align: center;
            transition: all 0.2s;
        }

        .opt-btn:hover { border-color: var(--secondary-color); background-color: #eaf4fc; }

        .opt-btn.correct {
            background-color: var(--success-color) !important;
            border-color: var(--success-color) !important;
            color: white !important;
        }

        .opt-btn.incorrect {
            background-color: var(--error-color) !important;
            border-color: var(--error-color) !important;
            color: white !important;
        }

        /* LÃ¶sung-Bereich */
        .card-footer {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 10px;
            border-top: 1px solid #eee;
            padding-top: 15px;
        }

        .btn-show-sol {
            background: none;
            border: 1px solid var(--success-color);
            color: var(--success-color);
            padding: 5px 15px;
            border-radius: 5px;
            cursor: pointer;
            font-weight: bold;
            font-size: 0.9rem;
        }

        .btn-show-sol:hover { background-color: #f0fff4; }

        .solution-display {
            display: none;
            background-color: #f0fff4;
            color: #155724;
            padding: 10px;
            border-radius: 6px;
            font-weight: bold;
            text-align: center;
            width: 100%;
            border: 1px solid var(--success-color);
        }

        .global-controls {
            display: flex;
            justify-content: center;
            gap: 15px;
            margin-top: 40px;
            flex-wrap: wrap;
        }

        .btn-ctrl {
            padding: 12px 25px;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-weight: bold;
            color: white;
        }

        .btn-reset { background-color: #7f8c8d; }
        
        @media (max-width: 500px) {
            .container { padding: 15px; }
            .btn-ctrl { width: 100%; }
        }
    </style>
</head>
<body>

<div class="container">
    <h1>Sprachassistent Russisch</h1>
    <h2>HÃ¶rverstÃ¤ndnis: Adjektive im Instrumental</h2>

    <div class="intro-section">
        <p>HÃ¶re dir den Satz mit der <strong>MÃ¤nnerstimme</strong> an. WÃ¤hle die korrekte Form, die du gehÃ¶rt hast. Klicke bei Bedarf auf â€žLÃ¶sungâ€œ, um den ganzen Satz zu lesen.</p>
    </div>

    <div id="exercise-list">
        <!-- JS generiert Karten -->
    </div>

    <div class="global-controls">
        <button class="btn-ctrl btn-reset" onclick="initGame()">Alle Aufgaben neu mischen</button>
    </div>
</div>

<script>
    const taskData = [
        { id: 1, sentence: "Ð¯ Ð¸Ð½Ñ‚ÐµÑ€ÐµÑÑƒÑŽÑÑŒ Ñ€ÑƒÑÑÐºÐ¸Ð¼ ÑÐ·Ñ‹ÐºÐ¾Ð¼.", opts: ["Ñ€ÑƒÑÑÐºÐ¸Ð¼ ÑÐ·Ñ‹ÐºÐ¾Ð¼", "Ñ€ÑƒÑÑÐºÑ‹Ð¼ ÑÐ·Ñ‹ÐºÐ¾Ð¼", "Ñ€ÑƒÑÑÐºÐ¾Ð¹ ÑÐ·Ñ‹ÐºÐ¾Ð¼"], correct: "Ñ€ÑƒÑÑÐºÐ¸Ð¼ ÑÐ·Ñ‹ÐºÐ¾Ð¼" },
        { id: 2, sentence: "ÐžÐ½ Ð´Ð¾Ð²Ð¾Ð»ÐµÐ½ Ð½Ð¾Ð²Ð¾Ð¹ Ñ€Ð°Ð±Ð¾Ñ‚Ð¾Ð¹.", opts: ["Ð½Ð¾Ð²Ñ‹Ð¼ Ñ€Ð°Ð±Ð¾Ñ‚Ð¾Ð¹", "Ð½Ð¾Ð²Ð¾Ð¹ Ñ€Ð°Ð±Ð¾Ñ‚Ð¾Ð¹", "Ð½Ð¾Ð²Ð¾Ðµ Ñ€Ð°Ð±Ð¾Ñ‚Ð¾Ð¹"], correct: "Ð½Ð¾Ð²Ð¾Ð¹ Ñ€Ð°Ð±Ð¾Ñ‚Ð¾Ð¹" },
        { id: 3, sentence: "ÐœÑ‹ Ð²Ð¾ÑÑ…Ð¸Ñ‰Ð°ÐµÐ¼ÑÑ Ð´Ñ€ÐµÐ²Ð½Ð¸Ð¼ Ð¸ÑÐºÑƒÑÑÑ‚Ð²Ð¾Ð¼.", opts: ["Ð´Ñ€ÐµÐ²Ð½Ð¸Ð¼ Ð¸ÑÐºÑƒÑÑÑ‚Ð²Ð¾Ð¼", "Ð´Ñ€ÐµÐ²Ð½Ñ‹Ð¼ Ð¸ÑÐºÑƒÑÑÑ‚Ð²Ð¾Ð¼", "Ð´Ñ€ÐµÐ²Ð½ÐµÐ¹ Ð¸ÑÐºÑƒÑÑÑ‚Ð²Ð¾Ð¼"], correct: "Ð´Ñ€ÐµÐ²Ð½Ð¸Ð¼ Ð¸ÑÐºÑƒÑÑÑ‚Ð²Ð¾Ð¼" },
        { id: 4, sentence: "ÐžÐ½Ð° Ð¿ÑŒÑ‘Ñ‚ Ñ‡Ð°Ð¹ Ñ Ð³Ð¾Ñ€ÑÑ‡Ð¸Ð¼ Ð¼Ð¾Ð»Ð¾ÐºÐ¾Ð¼.", opts: ["Ð³Ð¾Ñ€ÑÑ‡Ð¸Ð¼ Ð¼Ð¾Ð»Ð¾ÐºÐ¾Ð¼", "Ð³Ð¾Ñ€ÑÑ‡ÐµÐ¼ Ð¼Ð¾Ð»Ð¾ÐºÐ¾Ð¼", "Ð³Ð¾Ñ€ÑÑ‡ÐµÐ¹ Ð¼Ð¾Ð»Ð¾ÐºÐ¾Ð¼"], correct: "Ð³Ð¾Ñ€ÑÑ‡Ð¸Ð¼ Ð¼Ð¾Ð»Ð¾ÐºÐ¾Ð¼" },
        { id: 5, sentence: "ÐŸÐµÑ€ÐµÐ´ Ð²Ñ‹ÑÐ¾ÐºÐ¸Ð¼ Ð·Ð´Ð°Ð½Ð¸ÐµÐ¼ ÐµÑÑ‚ÑŒ Ð¿Ð°Ñ€Ðº.", opts: ["Ð²Ñ‹ÑÐ¾ÐºÐ¸Ð¼ Ð·Ð´Ð°Ð½Ð¸ÐµÐ¼", "Ð²Ñ‹ÑÐ¾ÐºÐ¾Ð¼ Ð·Ð´Ð°Ð½Ð¸ÐµÐ¼", "Ð²Ñ‹ÑÐ¾ÐºÐ¾Ð¹ Ð·Ð´Ð°Ð½Ð¸ÐµÐ¼"], correct: "Ð²Ñ‹ÑÐ¾ÐºÐ¸Ð¼ Ð·Ð´Ð°Ð½Ð¸ÐµÐ¼" },
        { id: 6, sentence: "Ð¯ Ð¿Ð¸ÑˆÑƒ Ñ‡Ñ‘Ñ€Ð½Ñ‹Ð¼ ÐºÐ°Ñ€Ð°Ð½Ð´Ð°ÑˆÐ¾Ð¼.", opts: ["Ñ‡Ñ‘Ñ€Ð½Ñ‹Ð¼ ÐºÐ°Ñ€Ð°Ð½Ð´Ð°ÑˆÐ¾Ð¼", "Ñ‡Ñ‘Ñ€Ð½Ð¸Ð¼ ÐºÐ°Ñ€Ð°Ð½Ð´Ð°ÑˆÐ¾Ð¼", "Ñ‡Ñ‘Ñ€Ð½ÑƒÑŽ ÐºÐ°Ñ€Ð°Ð½Ð´Ð°ÑˆÐ¾Ð¼"], correct: "Ñ‡Ñ‘Ñ€Ð½Ñ‹Ð¼ ÐºÐ°Ñ€Ð°Ð½Ð´Ð°ÑˆÐ¾Ð¼" },
        { id: 7, sentence: "ÐœÑ‹ Ð»ÑŽÐ±ÑƒÐµÐ¼ÑÑ ÑÐ¸Ð½Ð¸Ð¼ Ð¼Ð¾Ñ€ÐµÐ¼.", opts: ["ÑÐ¸Ð½Ð¸Ð¼ Ð¼Ð¾Ñ€ÐµÐ¼", "ÑÐ¸Ð½Ñ‹Ð¼ Ð¼Ð¾Ñ€ÐµÐ¼", "ÑÐ¸Ð½ÐµÐ¹ Ð¼Ð¾Ñ€ÐµÐ¼"], correct: "ÑÐ¸Ð½Ð¸Ð¼ Ð¼Ð¾Ñ€ÐµÐ¼" },
        { id: 8, sentence: "ÐžÐ½Ð° Ñ€Ð°Ð·Ð³Ð¾Ð²Ð°Ñ€Ð¸Ð²Ð°ÐµÑ‚ Ñ Ð»ÑƒÑ‡ÑˆÐµÐ¹ Ð¿Ð¾Ð´Ñ€ÑƒÐ³Ð¾Ð¹.", opts: ["Ð»ÑƒÑ‡ÑˆÐµÐ¹ Ð¿Ð¾Ð´Ñ€ÑƒÐ³Ð¾Ð¹", "Ð»ÑƒÑ‡ÑˆÐ¸Ð¼ Ð¿Ð¾Ð´Ñ€ÑƒÐ³Ð¾Ð¹", "Ð»ÑƒÑ‡ÑˆÑƒÑŽ Ð¿Ð¾Ð´Ñ€ÑƒÐ³Ñƒ"], correct: "Ð»ÑƒÑ‡ÑˆÐµÐ¹ Ð¿Ð¾Ð´Ñ€ÑƒÐ³Ð¾Ð¹" },
        { id: 9, sentence: "ÐšÐ¾Ñ‚ ÑÐ¿Ð¸at Ð¿Ð¾Ð´ ÑÑ‚Ð°Ñ€Ñ‹Ð¼ Ð¼Ð¾ÑÑ‚Ð¾Ð¼.", opts: ["ÑÑ‚Ð°Ñ€Ñ‹Ð¼ Ð¼Ð¾ÑÑ‚Ð¾Ð¼", "ÑÑ‚Ð°Ñ€Ð¸Ð¼ Ð¼Ð¾ÑÑ‚Ð¾Ð¼", "ÑÑ‚Ð°Ñ€Ð¾Ð¼ Ð¼Ð¾ÑÑ‚Ð¾Ð¼"], correct: "ÑÑ‚Ð°Ñ€Ñ‹Ð¼ Ð¼Ð¾ÑÑ‚Ð¾Ð¼" },
        { id: 10, sentence: "ÐžÐ½ ÑƒÐ¿Ñ€Ð°Ð²Ð»ÑÐµÑ‚ Ð±Ð¾Ð»ÑŒÑˆÐ¾Ð¹ ÐºÐ¾Ð¼Ð¿Ð°Ð½Ð¸ÐµÐ¹.", opts: ["Ð±Ð¾Ð»ÑŒÑˆÐ¾Ð¹ ÐºÐ¾Ð¼Ð¿Ð°Ð½Ð¸ÐµÐ¹", "Ð±Ð¾Ð»ÑŒÑˆÐ¸Ð¼ ÐºÐ¾Ð¼Ð¿Ð°Ð½Ð¸ÐµÐ¹", "Ð±Ð¾Ð»ÑŒÑˆÑƒÑŽ ÐºÐ¾Ð¼Ð¿Ð°Ð½Ð¸ÑŽ"], correct: "Ð±Ð¾Ð»ÑŒÑˆÐ¾Ð¹ ÐºÐ¾Ð¼Ð¿Ð°Ð½Ð¸ÐµÐ¹" }
    ];

    let maleVoice = null;

    function loadVoices() {
        const voices = window.speechSynthesis.getVoices();
        // Suche gezielt nach russischen MÃ¤nnerstimmen (Pavel, Maxim, etc.)
        maleVoice = voices.find(v => v.lang.includes('ru') && 
            (v.name.toLowerCase().includes('pavel') || v.name.toLowerCase().includes('maxim') || v.name.toLowerCase().includes('male'))) 
            || voices.find(v => v.lang.includes('ru'));
    }

    window.speechSynthesis.onvoiceschanged = loadVoices;
    loadVoices();

    function play(text) {
        window.speechSynthesis.cancel();
        const msg = new SpeechSynthesisUtterance(text);
        if (maleVoice) msg.voice = maleVoice;
        msg.lang = 'ru-RU';
        msg.rate = 0.85;
        window.speechSynthesis.speak(msg);
    }

    function shuffle(arr) {
        return arr.sort(() => Math.random() - 0.5);
    }

    function initGame() {
        const container = document.getElementById('exercise-list');
        container.innerHTML = '';
        const shuffledTasks = shuffle([...taskData]);

        shuffledTasks.forEach((task, index) => {
            const card = document.createElement('div');
            card.className = 'exercise-card';
            const shuffledOpts = shuffle([...task.opts]);

            card.innerHTML = `
                <div style="font-weight:bold; color:#7f8c8d; margin-bottom:10px;">Aufgabe ${index + 1}</div>
                <div class="audio-box">
                    <button class="play-btn" onclick="play('${task.sentence}')">ðŸ”Š Satz anhÃ¶ren</button>
                </div>
                <div class="options-grid" id="grid-${task.id}">
                    ${shuffledOpts.map(o => `<button class="opt-btn" onclick="check(${task.id}, '${o}', '${task.correct}')">${o}</button>`).join('')}
                </div>
                <div class="card-footer">
                    <button class="btn-show-sol" onclick="toggleSol(${task.id})">LÃ¶sung anzeigen</button>
                    <div class="solution-display" id="sol-${task.id}">${task.sentence}</div>
                </div>
            `;
            container.appendChild(card);
        });
    }

    window.check = (id, selected, correct) => {
        const btns = document.querySelectorAll(`#grid-${id} .opt-btn`);
        btns.forEach(b => {
            b.classList.remove('correct', 'incorrect');
            if (b.innerText === selected) {
                b.classList.add(selected === correct ? 'correct' : 'incorrect');
            }
        });
    };

    window.toggleSol = (id) => {
        const display = document.getElementById(`sol-${id}`);
        const isHidden = window.getComputedStyle(display).display === 'none';
        display.style.display = isHidden ? 'block' : 'none';
        
        // Bei Anzeige der LÃ¶sung auch den richtigen Button grÃ¼n markieren
        if (isHidden) {
            const task = taskData.find(t => t.id === id);
            const btns = document.querySelectorAll(`#grid-${id} .opt-btn`);
            btns.forEach(b => {
                if (b.innerText === task.correct) b.classList.add('correct');
            });
        }
    };

    window.onload = initGame;
</script>

</body>
</html>